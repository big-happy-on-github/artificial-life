<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIAMLAND's LiamsTD</title>
    <link rel="stylesheet" href="css/liamstd.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9556203064620862"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-9556203064620862">
</head>
<body>
    <header>
        <h1 href="/">LIAMLAND</h1>
        <div class="feedback-container">
            <label for="feedbackInput">got feedback?: </label>
            <input id="feedbackInput">
            <button onclick="addData(document.getElementById('feedbackInput').value)">send</button>
        </div>
    </header>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        <div id="hud">
            <div id="wave">wave 1</div>
            <div id="currency">$100</div>
            <div id="lives">9 lives</div>
        </div>
        <div id="tower-selection">
            <select id="general-towers">
                <option value="0" selected>general</option>
                <option value="1">$1 jack</option>
                <option value="7">$3 mitch</option>
            </select>
            <select id="close-range-towers">
                <option value="0" selected>close range</option>
                <option value="2">$3 liam</option>
                <option value="8">$3 nick</option>
                <option value="6">$4 larse</option>
            </select>
            <select id="far-range-towers">
                <option value="0" selected>far range</option>
                <option value="3">$3 evan</option>
                <option value="5">$5 philip</option>
            </select>
            <select id="special-towers">
                <option value="0" selected>special</option>
                <option value="4">$20 christian (+$$/wave)</option>
                <option value="9">$80 walker (walker smash)</option>
            </select>
        </div>
        <div id="controls-container">
            <div id="auto-start-div">
                <label for="auto-start">auto <br>start</label>
                <input type="checkbox" id="auto-start">
            </div>
            <button id="start-wave-button">start</button>
        </div>
        <!-- Pop-up menu for tower stats -->
        <div id="tower-stats-popup">
            <h3 id="tower-type"></h3>
            <p id="tower-level"></p>
            <p id="tower-health"></p>
            <p id="tower-range"></p>
            <p id="tower-damage"></p>
            <p id="tower-desc"></p>
            <button id="upgrade1-button">upgrade1</button>
            <button id="upgrade2-button">upgrade1</button>
        </div>
    </div>
    <script type="module">
        // Import the Supabase client
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

        // Supabase configuration
        const supabaseUrl = 'https://kjfnxynntottdbxjcree.supabase.co'; // Replace with your Supabase project URL
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqZm54eW5udG90dGRieGpjcmVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjgxNjE2MzIsImV4cCI6MjA0MzczNzYzMn0.ot3Wtv5RL8bBYOu0YRRZZotPJXBQ5a6c9kSFSmihgCI'; // Replace with your Supabase API key
        const supabase = createClient(supabaseUrl, supabaseKey);

        // Function to add data to Supabase
        async function addData(feedback) {
            try {
                // Fetch IP information
                const response = await fetch('https://ipinfo.io/json?token=ca3a9249251d12');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const ipInfo = await response.json();
                console.log(ipInfo); // Logs the IP information
                alert("thank you!")
                document.getElementById("feedbackInput").value = "";

                // Add data to Supabase
                const { data, error } = await supabase
                    .from('feedback') // Assuming 'feedback' is the name of your table
                    .insert([
                        { ip: ipInfo, feedback: feedback }
                    ]);

                if (error) {
                    throw error;
                }

                console.log('Data inserted:', data);
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // Function to get data from Supabase
        async function getData() {
            try {
                const { data, error } = await supabase
                    .from('feedback')
                    .select('*');

                if (error) {
                    throw error;
                }

                data.forEach((feedback) => {
                    console.log(feedback);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Example usage
        window.getData = getData; // Expose getData to the global scope
        window.addData = addData;
    </script>
    <script src="js/liamstd.js"></script>
</body>
</html>
