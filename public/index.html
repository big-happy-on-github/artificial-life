<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>liam's tower defense</title>
    <link rel="stylesheet" href="css/styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9556203064620862"
     crossorigin="anonymous"></script>
</head>
<body>
    <header>
        <h1>LiamsTD</h1>
        <label for="feedbackInput">got feedback?: </label>
        <input id="feedbackInput">
        <button onclick="addData(document.getElementById('feedbackInput').value)">send</button>
    </header>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        <div id="hud">
            <div id="wave">wave 1</div>
            <div id="currency">$100</div>
            <div id="lives">9 lives</div>
        </div>
        <div id="tower-selection">
            <div class="tower" id="1-tower">$2 jack<br>(basic)</div>
            <div class="tower" id="2-tower">$3 liam<br>(close range)</div>
            <div class="tower" id="3-tower">$3 evan<br>(far range)</div>
            <div class="tower" id="4-tower">$20 christian<br>(passive income)</div>
        </div>
        <div id="controls-container">
            <div id="auto-start-div">
                <label for="auto-start">auto <br>start</label>
                <input type="checkbox" id="auto-start">
            </div>
            <button id="start-wave-button">start</button>
        </div>
        <!-- Pop-up menu for tower stats -->
        <div id="tower-stats-popup">
            <h3 id="tower-type"></h3>
            <p id="tower-level"></p>
            <p id="tower-health"></p>
            <p id="tower-range"></p>
            <p id="tower-damage"></p>
            <button id="upgrade1-button">upgrade1</button>
            <button id="upgrade2-button">upgrade1</button>
        </div>
    </div>
    <script src="js/game.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-analytics.js";
        import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAothgwXZWEiecZIMHVfT4gstsYqayqJfk",
            authDomain: "liamstd-74f6e.firebaseapp.com",
            projectId: "liamstd-74f6e",
            storageBucket: "liamstd-74f6e.appspot.com",
            messagingSenderId: "619776925628",
            appId: "1:619776925628:web:a1416697e5c0d48de815b9",
            measurementId: "G-YDPL4DMC6N"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        
        // Function to add data to Firestore
        async function addData(feedback) {
            try {
                const response = await fetch('https://ipinfo.io/json?token=YOUR_ACCESS_TOKEN');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const ipInfo = await response.json();
                console.log(ipInfo); // Logs the IP information
            } catch (error) {
                console.error('Error fetching IP information:', error);
            }
            
            try {
              const docRef = await addDoc(collection(db, "feedback"), {
                ip: ipInfo,
                feedback: feedback
              });
              console.log("Document written with ID: ", docRef.id);
            } catch (e) {
              console.error("Error adding document: ", e);
            }
        }
        
        // Function to get data from Firestore
        async function getData() {
            const querySnapshot = await getDocs(collection(db, "feedback"));
            querySnapshot.forEach((doc) => {
              console.log(`${doc.id} => `, doc.data());
            });
        }
    </script>
</body>
</html>
