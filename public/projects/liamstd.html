 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIAMLAND's LiamsTD</title>
    <link rel="stylesheet" href="/css/liamstd.css">
    <link rel="stylesheet" href="/css/styles.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9556203064620862"
     crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-9556203064620862">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
    <header>
        <a href="/welcome"><h1>LIAMLAND</h1></a>
        <div class="feedback-container">
            <label for="feedbackInput">got feedback?: </label>
            <input id="feedbackInput">
            <button onclick="addData(document.getElementById('feedbackInput').value)">send</button>
        </div>
    </header>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        <div id="hud">
            <div id="wave">wave 1</div>
            <div id="currency">$100</div>
            <div id="lives">9 lives</div>
        </div>
        <div id="tower-selection">
            <select id="general-towers">
                <option value="0" selected>general</option>
                <option value="1">$1 jack</option>
                <option value="7">$3 mitch</option>
                <option value="8">$3 nick</option>
                <option value="6">$6 lars</option>
            </select>
            <select id="close-range-towers">
                <option value="0" selected>close range</option>
                <option value="2">$3 liam</option>
            </select>
            <select id="far-range-towers">
                <option value="0" selected>far range</option>
                <option value="3">$3 evan</option>
                <option value="5">$5 philip</option>
            </select>
            <select id="special-towers">
                <option value="0" selected>special</option>
                <option value="10">$7 declan (freeze)</option>
                <option value="12">$7 luca (+damage)</option>
                <option value="4">$20 christian (+$$/wave)</option>
                <option value="9">$80 walker (walker smash)</option>
                <option value="11">$âˆž cole (...)</option>
            </select>
        </div>
        <div id="controls-container">
            <div id="auto-start-div">
                <label for="auto-start">auto <br>start</label>
                <input type="checkbox" id="auto-start">
            </div>
            <div id="freeplay-div">
                <label for="freeplay-mode">freeplay</label>
                <input type="checkbox" id="freeplay-mode" onclick="toggleFreeplay()">
                <!-- Freeplay Cheat Buttons -->
                <button onclick="giveMoney(prompt('How much money do you want to add?'))" id="add-money-button" style="display: none;">+money</button>
                <button onclick="skipToWave(prompt('What wave do you want to skip to?'))" id="skip-wave-button" style="display: none;">+wave</button>
            </div>
            <button id="start-wave-button">start</button>
        </div>
        <!-- Pop-up menu for tower stats -->
        <div id="tower-stats-popup">
            <h3 id="tower-type"></h3>
            <p id="tower-level"></p>
            <p id="tower-health"></p>
            <p id="tower-range"></p>
            <p id="tower-damage"></p>
            <p id="tower-desc"></p>
            <button id="upgrade1-button">upgrade1</button>
            <button id="upgrade2-button">upgrade2</button>
        </div>
    </div>
    <div id="leaderboard-container">
        <h2>leaderboard:</h2>
        <ol id="leaderboard">
        </ol>
    </div>
    <script type="module" src="/js/liamland.js"></script>
    <script type="module" src="/js/liamstd.js"></script>
    <script>
        // Function to toggle freeplay mode
        function toggleFreeplay() {
            const freeplayCheckbox = document.getElementById('freeplay-mode');
            const addMoneyButton = document.getElementById('add-money-button');
            const skipWaveButton = document.getElementById('skip-wave-button');
            
            window.freeplayMode = freeplayCheckbox.checked; // Toggle based on checkbox state
        
            if (window.freeplayMode) {
                addMoneyButton.style.display = 'block';
                skipWaveButton.style.display = 'block';
            } else {
                addMoneyButton.style.display = 'none';
                skipWaveButton.style.display = 'none';
            }
        }
        
        // Initialize freeplay state on page load
        document.addEventListener('DOMContentLoaded', () => {
            window.freeplayMode = false;  // default mode is not freeplay
            window.wasFreeplay = false;   // track if freeplay was used
        
            const freeplayCheckbox = document.getElementById('freeplay-mode');
            freeplayCheckbox.checked = false; // Ensure checkbox is unchecked by default
        });

        // Cheats for freeplay mode
        function giveMoney(amount) {
            if (window.freeplayMode && amount) {
                window.currency += parseInt(amount, 10) || 0;
                window.updateHUD();
                console.log(`Added $${amount}`);
            } else {
                console.log('Give money is only allowed in Freeplay Mode.');
            }
        }

        function skipToWave(newWave) {
            if (window.freeplayMode && newWave) {
                window.wave = parseInt(newWave, 10);
                window.nextWave();
                window.updateHUD();
                console.log(`Skipped to wave ${newWave}`);
            } else {
                console.log('Skipping waves is only allowed in Freeplay Mode.');
            }
        }

        if (window.freeplayMode && !window.wasFreeplay) {
            window.waveDisplay.textContent += " [Freeplay Mode]";
            window.wasFreeplay = true;
        } else if (!window.freeplayMode && window.wasFreeplay) {
            // Reset freeplay state
            window.wasFreeplay = false;
            window.location.reload();
        }
    </script>
</body>
</html>
